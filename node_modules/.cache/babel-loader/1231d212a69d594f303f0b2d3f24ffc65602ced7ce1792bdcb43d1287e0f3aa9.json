{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OptimizedImage=_ref=>{let{src,alt,className='',style={},loading='lazy',onLoad,onError}=_ref;const[isLoaded,setIsLoaded]=useState(false);const[hasError,setHasError]=useState(false);const[isInView,setIsInView]=useState(false);const imgRef=useRef(null);// Intersection Observer for lazy loading\nuseEffect(()=>{if(loading!=='lazy'){setIsInView(true);return;}const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting){setIsInView(true);observer.disconnect();}},{threshold:0.1});if(imgRef.current){observer.observe(imgRef.current);}return()=>observer.disconnect();},[loading]);const handleLoad=()=>{setIsLoaded(true);onLoad===null||onLoad===void 0?void 0:onLoad();};const handleError=()=>{setHasError(true);onError===null||onError===void 0?void 0:onError();};return/*#__PURE__*/_jsxs(\"div\",{ref:imgRef,className:\"optimized-image-container \".concat(className),style:style,children:[!isInView&&loading==='lazy'&&/*#__PURE__*/_jsx(\"div\",{className:\"image-placeholder\",children:/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-content\",children:\"Loading...\"})}),isInView&&/*#__PURE__*/_jsx(\"img\",{src:src,alt:alt,className:\"optimized-image \".concat(isLoaded?'loaded':'loading',\" \").concat(hasError?'error':''),onLoad:handleLoad,onError:handleError,loading:loading,decoding:\"async\"}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"image-error\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-content\",children:\"Failed to load image\"})})]});};export default OptimizedImage;","map":{"version":3,"names":["React","useState","useRef","useEffect","jsx","_jsx","jsxs","_jsxs","OptimizedImage","_ref","src","alt","className","style","loading","onLoad","onError","isLoaded","setIsLoaded","hasError","setHasError","isInView","setIsInView","imgRef","observer","IntersectionObserver","_ref2","entry","isIntersecting","disconnect","threshold","current","observe","handleLoad","handleError","ref","concat","children","decoding"],"sources":["C:/Users/fasih/OneDrive/Desktop/FreeWILLLTD/freewill-website/src/components/OptimizedImage.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\n\r\ninterface OptimizedImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  loading?: 'lazy' | 'eager';\r\n  onLoad?: () => void;\r\n  onError?: () => void;\r\n}\r\n\r\nconst OptimizedImage: React.FC<OptimizedImageProps> = ({\r\n  src,\r\n  alt,\r\n  className = '',\r\n  style = {},\r\n  loading = 'lazy',\r\n  onLoad,\r\n  onError\r\n}) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isInView, setIsInView] = useState(false);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n  // Intersection Observer for lazy loading\r\n  useEffect(() => {\r\n    if (loading !== 'lazy') {\r\n      setIsInView(true);\r\n      return;\r\n    }\r\n\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          setIsInView(true);\r\n          observer.disconnect();\r\n        }\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (imgRef.current) {\r\n      observer.observe(imgRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, [loading]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoaded(true);\r\n    onLoad?.();\r\n  };\r\n\r\n  const handleError = () => {\r\n    setHasError(true);\r\n    onError?.();\r\n  };\r\n\r\n  return (\r\n    <div \r\n      ref={imgRef}\r\n      className={`optimized-image-container ${className}`}\r\n      style={style}\r\n    >\r\n      {!isInView && loading === 'lazy' && (\r\n        <div className=\"image-placeholder\">\r\n          <div className=\"placeholder-content\">Loading...</div>\r\n        </div>\r\n      )}\r\n      \r\n      {isInView && (\r\n        <img\r\n          src={src}\r\n          alt={alt}\r\n          className={`optimized-image ${isLoaded ? 'loaded' : 'loading'} ${hasError ? 'error' : ''}`}\r\n          onLoad={handleLoad}\r\n          onError={handleError}\r\n          loading={loading}\r\n          decoding=\"async\"\r\n        />\r\n      )}\r\n      \r\n      {hasError && (\r\n        <div className=\"image-error\">\r\n          <div className=\"error-content\">Failed to load image</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OptimizedImage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}